#!/bin/bash
set -euo pipefail

FLAGS=()

add_flags() {
	local name file line

	for name in "$@"; do
		file="${XDG_CONFIG_HOME:-"$HOME/.config"}/$name-flags.conf"
		[[ -f "$file" ]] || continue

		while IFS= read -r line; do
			[[ "$line" =~ ^[[:space:]]*(#|$) ]] || FLAGS+=("$line")
		done < "$file"
	done
}

add_flags mongodb-compass electron
exec /usr/bin/mongodb-compass "${FLAGS[@]}" "$@"
